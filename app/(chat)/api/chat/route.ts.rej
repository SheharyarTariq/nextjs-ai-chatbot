@@ -252,12 +282,28 @@
     }
 
     const stream = createUIMessageStream({
-      execute: ({ writer: dataStream }) => {
+      execute: async ({ writer: dataStream }) => {
+        // Fetch system prompt from database (with fallback to code-based prompt)
+        const dbPromptContent = await getSystemPromptFromDB();
+        const basePrompt = dbPromptContent || regularPrompt;
+        
+        // Build the full system prompt
+        const requestPrompt = getRequestPromptFromHints(requestHints);
+        const profilePrompt = getUserProfilePrompt(userProfile);
+        
+        let fullSystemPrompt: string;
+        if (selectedChatModel === "chat-model-reasoning") {
+          fullSystemPrompt = `${basePrompt}\\n\\n${requestPrompt}${profilePrompt}`;
+        } else {
+          fullSystemPrompt = `${basePrompt}\\n\\n${requestPrompt}${profilePrompt}\\n\\n${artifactsPrompt}`;
+        }
+        
+        // Add knowledge base context if available
+        if (contextText) {
+          fullSystemPrompt += `\\n\\nIMPORTANT: You have access to the following content from the "Athlete Standards" book/knowledge base. Use this information to answer the user's questions, explain concepts, or provide quotes. This is your core knowledge source:\\n\\n${contextText}`;
+        }
+
         const result = streamText({
           model: myProvider.languageModel(selectedChatModel),
           temperature: 0.7,
-          system: systemPrompt({
-            selectedChatModel,
-            requestHints,
-            userProfile,
-          }) + (contextText ? `\\n\\nIMPORTANT: You have access to the following content from the "Athlete Standards" book/knowledge base. Use this information to answer the user's questions, explain concepts, or provide quotes. This is your core knowledge source:\\n\\n${contextText}` : ""),
+          system: fullSystemPrompt,
